---
import { proyects } from '../data/projects'
import Card from './Card.astro'
---

<div class='grid grid-cols-1 md:grid-cols-3 md:gap-x-5 gap-y-5'>
	{
		proyects.map(({ cover, name, desc, hrefWeb, hrefCode }) => (
			<Card border='t' title={name} img={cover} hrefWeb={hrefWeb} hrefCode={hrefCode} />
		))
	}
</div>
<button
	class='bg-gray bg-opacity-10 rounded-lg w-full md:w-80 py-2 transition delay-150 duration-200 ease-in-out hover:scale-105 hover:bg-[#2f1a2ac2]'
	>Ver m√°s</button
>

<style>
	div :global(div):nth-child(n + 4) {
		@apply hidden opacity-0;
	}
</style>

<script>
	const buttonShowMore = document.querySelector('#proyectos button') as HTMLInputElement
	const proyects = document.querySelectorAll('#proyectos article > div > div:nth-child(n + 4)')

	buttonShowMore.addEventListener('click', () => {
		proyects.forEach((proyect) => {
			;(proyect as HTMLElement).style.setProperty('display', 'flex')
			;(proyect as HTMLElement).style.setProperty('opacity', '0')
			proyect.clientWidth
			;(proyect as HTMLElement).classList.add(
				'transition-all',
				'ease-linear',
				'delay-250',
				'duration-250'
			)
			;(proyect as HTMLElement).style.setProperty('opacity', '1')
			buttonShowMore.classList.add('hidden')
		})
	})
</script>
